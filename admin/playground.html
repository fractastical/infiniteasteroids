<!DOCTYPE html>
<html>

<head>
    <title>Infinite Asteroids Playground</title>
    <link href="styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        .control-panel {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            overflow-y: auto;
        }

        .control-panel.left {
            left: 0;
        }

        .control-panel.right {
            right: 0;
        }

        .control-panel button {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            padding: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        .control-panel button:hover {
            background-color: #45a049;
        }

        #gameCanvas {
            margin-left: 200px;
            margin-right: 200px;
        }

        .weapon-section {
            margin-bottom: 20px;
            border-bottom: 1px solid #666;
            padding-bottom: 10px;
        }
    </style>
</head>

<body>
    <!-- Left Control Panel -->
    <div class="control-panel left">
        <h3>Weapon Controls</h3>

        <div class="weapon-section">
            <h4>Basic Laser</h4>
            <button onclick="modifyWeapon('ship.laserLevel', 1)">Laser Level +1</button>
            <button onclick="modifyWeapon('ship.laserCooldown', -1)">Decrease Cooldown</button>
        </div>

        <div class="weapon-section">
            <h4>Explosive Laser</h4>
            <button onclick="modifyWeapon('explosive.level', 1)">Explosive Level +1</button>
        </div>

        <div class="weapon-section">
            <h4>Turret</h4>
            <button onclick="modifyWeapon('turret.range', 1)">Range +1</button>
            <button onclick="modifyWeapon('turret.fireRate', 1)">Fire Rate +1</button>
            <button onclick="modifyWeapon('turret.damage', 1)">Damage +1</button>
        </div>

        <div class="weapon-section">
            <h4>Drone</h4>
            <button onclick="modifyWeapon('drone.speed', 0.1)">Speed +0.1</button>
            <button onclick="modifyWeapon('drone.laserSpeed', 0.5)">Laser Speed +0.5</button>
            <button onclick="modifyWeapon('drone.laserInterval', 1)">Fire Rate +1</button>
            <button onclick="modifyWeapon('drone.damage', 1)">Damage +1</button>
        </div>

        <div class="weapon-section">
            <h4>Sonic Blast</h4>
            <button onclick="modifyWeapon('sonic.range', 10)">Range +10</button>
            <button onclick="modifyWeapon('sonic.damage', 1)">Damage +1</button>
            <button onclick="modifyWeapon('sonic.cooldown', -10)">Cooldown -10</button>
        </div>

        <div class="weapon-section">
            <h4>Bomber Drone</h4>
            <button onclick="modifyWeapon('bomberdrone.speed', 0.1)">Speed +0.1</button>
            <button onclick="modifyWeapon('bomberdrone.bombRadius', 5)">Bomb Radius +5</button>
            <button onclick="modifyWeapon('bomberdrone.bombDamage', 1)">Bomb Damage +1</button>
        </div>

        <div class="weapon-section">
            <h4>Death Ray</h4>
            <button onclick="modifyWeapon('deathray.length', 100)">Length +100</button>
            <button onclick="modifyWeapon('deathray.width', 5)">Width +5</button>
            <button onclick="modifyWeapon('deathray.cooldown', -10)">Cooldown -10</button>
        </div>

        <div class="weapon-section">
            <h4>Acid Bomb</h4>
            <button onclick="modifyWeapon('acid.size', 5)">Size +5</button>
            <button onclick="modifyWeapon('acid.duration', 30)">Duration +30</button>
            <button onclick="modifyWeapon('acid.cooldown', -10)">Cooldown -10</button>
        </div>

        <div class="weapon-section">
            <h4>Freeze Effect</h4>
            <button onclick="modifyWeapon('freeze.duration', 30)">Duration +30</button>
            <button onclick="modifyWeapon('freeze.cooldown', -30)">Cooldown -30</button>
        </div>

        <div class="weapon-section">
            <h4>Boomerang</h4>
            <button onclick="modifyWeapon('boomerang.speed', 0.5)">Speed +0.5</button>
            <button onclick="modifyWeapon('boomerang.damage', 1)">Damage +1</button>
        </div>

        <div class="weapon-section">
            <h4>Nano Swarm</h4>
            <button onclick="modifyWeapon('nanoswarm.speed', 0.5)">Speed +0.5</button>
            <button onclick="modifyWeapon('nanoswarm.damage', 1)">Damage +1</button>
            <button onclick="modifyWeapon('nanoswarm.cooldown', -10)">Cooldown -10</button>
        </div>

        <div class="weapon-section">
            <h4>Flamethrower</h4>
            <button onclick="modifyWeapon('flamethrower.range', 10)">Range +10</button>
            <button onclick="modifyWeapon('flamethrower.damage', 1)">Damage +1</button>
            <button onclick="modifyWeapon('flamethrower.cooldown', -1)">Cooldown -1</button>
        </div>

        <div class="weapon-section">
            <h4>Chain Lightning</h4>
            <button onclick="modifyWeapon('chainlightning.range', 10)">Range +10</button>
            <button onclick="modifyWeapon('chainlightning.damage', 1)">Damage +1</button>
            <button onclick="modifyWeapon('chainlightning.bounces', 1)">Bounces +1</button>
            <button onclick="modifyWeapon('chainlightning.cooldown', -10)">Cooldown -10</button>
        </div>

        <div class="weapon-section">
            <h4>Explosive Rocket</h4>
            <button onclick="modifyWeapon('explosiverocket.damage', 1)">Damage +1</button>
            <button onclick="modifyWeapon('explosiverocket.radius', 5)">Radius +5</button>
            <button onclick="modifyWeapon('explosiverocket.cooldown', -10)">Cooldown -10</button>
        </div>


    </div>

    <!-- Right Control Panel -->
    <div class="control-panel right">
        <h3>Game Controls</h3>


        <button onclick="waveIncrement10x()">Wave +10</button>

        <button onclick="spawnAsteroids(10)">Spawn 10 Asteroids</button>
        <button onclick="spawnAliens(27)">Spawn aliens</button>
        <button onclick="spawnBossAlien()">Spawn Boss Alien</button>
        <button onclick="spawnSuperBossAlien()">Spawn Super Boss Alien</button>
        <button onclick="spawnMegaBossAlien()">Spawn Mega Boss Alien</button>
        <button onclick="spawnOctoBoss()">Spawn Octoboss</button>

        <button onclick="spawnRandomUpgrade()">Space Upgrade</button>
        <button onclick="spawnRandomUpgrade100x()">Space Upgrade 100x</button>


        <button onclick="spawnFloatingIsland()">Spawn Island</button>
        <button onclick="openUpgradeOptions()">openUpgradeOptions</button>

        <button onclick="laser5x()">Laser 5x</button>
        <button onclick="sonic5x()">Sonic 5x</button>
        <button onclick="boom5x()">Boom 5x</button>
        <button onclick="chain5x()">Chain 5x</button>
        <button onclick="flame5x()">Flame 5x</button>
        <button onclick="flame1x()">Flame 1x</button>

        <button onclick="drone5x()">Drone 5x</button>
        <button onclick="exploding5x()">Explo 5x</button>
        <button onclick="acid5x()">Acid 5x</button>
        <button onclick="freeze5x()">Freeze 5x</button>

        <button onclick="activateComboFlameChainLightning()">Chain of Flame</button>
        <button onclick="activateComboExplosiveDrone()">Explo Drone</button>
        <button onclick="activateComboSonicBoomerang()">Sonic Boom</button>
        <button onclick="activateComboCryoBomb()">Cryo Bomb</button>
        <button onclick="activateComboGravityBlast()">Gravity Blast</button>


        <button onclick="toggleInvincibility()">Toggle Invincibility</button>
        <button onclick="addLives(1)">Add 1 Life</button>
        <button onclick="increaseWave()">Increase Wave</button>
        <button onclick="addCoins(1000)">Add 1000 Coins</button>
        <button onclick="toggleFreezeEffect()">Toggle Freeze Effect</button>
    </div>

    <div id="settingsModal" style="display:none;" class="modal">
        <h2>Volume Control</h2>
        <input type="range" id="volumeSlider" min="1" max="10" value="5">
        <p>Volume: <span id="volumeValue">5</span></p>
        <button onclick="toggleSettings()">Close</button>
    </div>


    <audio id="background-music" src="sounds/music_loop.mp3" loop></audio>
    <audio id="background-music2" src="sounds/ingame2.mp3" loop></audio>
    <audio id="background-music3" src="sounds/ingame3.mp3" loop></audio>

    <audio id="meteor-destroy-1" src="sounds/meteor_destroy.mp3"></audio>
    <audio id="meteor-destroy-2" src="sounds/meteor_destroy2.mp3"></audio>
    <audio id="meteor-destroy-3" src="sounds/meteor_destroy3.mp3"></audio>

    <audio id="shot-sound-1" src="sounds/shot1.mp3"></audio>
    <audio id="shot-sound-2" src="sounds/shot2.mp3"></audio>
    <audio id="shot-sound-3" src="sounds/shot3.mp3"></audio>

    <audio id="thruster-sound-1" src="sounds/thruster1.mp3"></audio>
    <audio id="thruster-sound-2" src="sounds/thruster2.mp3"></audio>
    <audio id="thruster-sound-3" src="sounds/thruster3.mp3"></audio>

    <audio id="ship-destroyed" src="sounds/ship_destroyed.mp3"></audio>

    <audio id="alien-entering-sound" src="sounds/alien_entering.mp3"></audio>

    <audio id="alien-laugh-sound" src="sounds/alien_laugh3.mp3"></audio>

    <audio id="alien-laser-1" src="sounds/alien_laser1.mp3"></audio>
    <audio id="alien-laser-2" src="sounds/alien_laser2.mp3"></audio>
    <audio id="alien-laser-3" src="sounds/alien_laser3.mp3"></audio>

    <audio id="boss-shoot-1" src="sounds/boss/boss_shoot.mp3"></audio>
    <audio id="boss-shoot-2" src="sounds/boss/boss_shoot2.mp3"></audio>

    <audio id="boss-drone-1" src="sounds/boss/boss_drone_spawn.mp3"></audio>
    <audio id="boss-take-damage-1" src="sounds/boss/boss_damaged.mp3"></audio>
    <audio id="boss-die" src="sounds/boss/boss_die.mp3"></audio>


    <audio id="gem-collecting-sound" src="sounds/bird_chirp.mp3"></audio>

    <audio id="spin-sound" src="sounds/upgrade_loop.mp3"></audio>

    <audio id="freeze-sound" src="sounds/freeze.mp3"></audio>
    <audio id="freeze-sound-2" src="sounds/freezew.mp3"></audio>
    <audio id="death-ray-sound" src="sounds/dray1.mp3"></audio>
    <audio id="deploy-drone-sound" src="sounds/deploy_drone.mp3"></audio>
    <audio id="acid-bomb-sound" src="sounds/acid_bomb.mp3"></audio>
    <audio id="bomb-lay-sound" src="sounds/lay_bomb.mp3"></audio>
    <audio id="lightning-sound" src="sounds/lightning_echo.mp3"></audio>
    <audio id="flamethrower" src="sounds/flame_throw2.mp3"></audio>

    <audio id="megaboss-background-music" src="sounds/boss1.mp3" loop></audio>
    <audio id="supermegaboss-background-music" src="sounds/boss2.mp3" loop></audio>
    <audio id="octoboss-background-music" src="sounds/boss3.mp3" loop></audio>


    <div id="xpBarContainer">
        <div id="xpBar"></div>
        <!-- <div id="bossHpBar"></div> -->
    </div>
    <div id="weaponInfo">
        <h2>Weapon Information</h2>
        <div id="weaponsContainer">
            <!-- Weapon entries will be dynamically added here -->
        </div>
        <div class="weaponInfo">
            <p id="secondaryWeaponInfo"></p>
        </div>


        <button id="closeButton" onclick="toggleWeaponInfo()">Close</button>
    </div>

    <div id="shipTypeContainer">
        <canvas id="miniShipPreview" width="40" height="40"></canvas>
        </span>
    </div>

    <div id="weaponDamageChartModal" class="modal" style="max-width:600px;">
        <div class="modal-content">
            <h2>Weapon Damage Per Wave</h2>
            <div id="weaponDamageChartContainer">
                <canvas id="weaponDamageChart"></canvas>
            </div>
            <button id="closeWeaponDamageChart">Close</button>
        </div>
    </div>

    <div id="achievementsModal" class="modal">
        <div class="modal-content">
            <h2>Achievements</h2>

            <!-- Container for showing achievements -->
            <div id="achievementsDisplay" class="achievement-page"></div>

            <!-- Navigation buttons -->
            <div class="modal-navigation">
                <button id="prevAchievement" class="nav-btn">←</button>
                <button id="nextAchievement" class="nav-btn">→</button>
            </div>

            <button id="closeAchievementsModal">Close</button>
        </div>
    </div>



    <div id="levelUpModal" class="modal">
        <div class="modal-content">
            <h4 id="leveluptitle">Choose upgrade!</h2>
                <div id="upgradeOptions">
                    <div class="upgrade-option" onclick="selectUpgrade(0)">
                        <div id="upgradeIcon1" class="upgrade-icon"></div>
                        <button id="upgrade1"></button>
                    </div>
                    <div class="upgrade-option" onclick="selectUpgrade(1)">
                        <div id="upgradeIcon2" class="upgrade-icon"></div>
                        <button id="upgrade2"></button>
                    </div>
                    <div class="upgrade-option" onclick="selectUpgrade(2)">
                        <div id="upgradeIcon3" class="upgrade-icon"></div>
                        <button id="upgrade3"></button>
                    </div>
                    <div class="upgrade-option" style="display:none" onclick="selectUpgrade(3)">
                        <div id="upgradeIcon4" class="upgrade-icon"></div>
                        <button id="upgrade4"></button>
                    </div>
                </div>
        </div>
    </div>


    <div id="shipType">
        Ship type: Basic&nbsp;&nbsp; &nbsp;
    </div>

    <div id="activeWeaponClassesContainer" class="bottom-icons">
    </div>


    <!-- Existing canvas and other elements -->
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <div id="bottomContent">
        <div id="waveCounter"></div>
        <div id="coinsDisplay"></div>
        <div id="livesDisplay"></div>
        <div id="controlsInfo"></div>
    </div>

    <div id="rouletteContainer" style="display: none">
        <div id="rouletteIcons"></div>
        <div id="planet"></div>
        <div id="upgradeDisplay"></div>
        <button id="spinButton" onClick="startRoulette()">Spin [ENTER]</button>

    </div>


    <script>

        const canvas = document.getElementById('gameCanvas');
        let ctx = canvas.getContext('2d' , { alpha: false  , willReadFrequently: true});

    </script>


    <script src="js/ships.js"></script>
    <script src="js/game-spacetime.js"></script>

    <script src="js/game-taper.js"></script>
    <script src="js/game-damagereport.js"></script>

    <script src="js/game.js"></script>
    <script src="js/game-playground.js"></script>

    <script src="js/optimize.js"></script>
    <script src="js/audio.js"></script>


    <!-- <script src="infinite/leaderboard.js"></script> -->
    <script src="js/asteroids.js"></script>
    <script src="js/weapons.js"></script>
    <script src="js/weapons-optimized.js"></script>
    <script src="js/weapons-secondary.js"></script>

    <script src="js/upgrade-menu.js"></script>
    <script src="js/upgrades-functions.js"></script>
    <script src="js/upgrades-main.js"></script>
    <script src="js/upgrades-space.js"></script>

    <script src="js/aliens.js"></script>
    <script src="js/gems.js"></script>
    <script src="js/special-effects.js"></script>



    <script>
        let tutorialActive = false;
        // Playground control functions
        function modifyWeapon(weaponPath, value) {
            const parts = weaponPath.split('.');
            const weaponClass = parts[0];

            // Activate the weapon class if it's not already active
            if (!activeWeaponClasses.includes(weaponClass)) {
                activateWeaponClass(weaponClass);
            }

            let obj = window;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    obj[parts[i]] = {};
                }
                obj = obj[parts[i]];
            }

            const lastPart = parts[parts.length - 1];
            if (lastPart === 'active') {
                // Handle activation of combo weapons
                switch (weaponClass) {
                    case 'chainofflame':
                        activateComboFlameChainLightning();
                        break;
                    case 'explodrone':
                        activateComboExplosiveDrone();
                        break;
                    case 'sonicboom':
                        activateComboSonicBoomerang();
                        break;

                }
            } else {
                if (obj[lastPart] === undefined) {
                    obj[lastPart] = 0;
                }
                obj[lastPart] += value;
            }

            console.log(`${weaponPath} modified by ${value}`);
        }


        function spawnAsteroids(count) {
            for (let i = 0; i < count; i++) {
                createAsteroids();
            }
            console.log(`Spawned ${count} asteroids`);
        }

        // function spawnAliens(count) {
        //     for (let i = 0; i < count; i++) {
        //         spawnAliens(wave);
        //     }
        //     console.log(`Spawned ${count} aliens`);
        // }

        function spawnBossAlien() {
            miniBossAlien = {
                x: 20,
                y: 50,
                size: 60,
                speed: 0.3,
                radius: 25,
                direction: Math.PI / 2,
                shootTimer: 0,
                hitpoints: wave * 2,
                shootInterval: 120
            };
            console.log("Spawned boss alien");
        }

        // function spawnSuperBossAlien() {
        //     spawnSuperBossAlien();
        //     console.log("Spawned super boss alien");
        // }

        // function spawnMegaBossAlien() {
        //     spawnMegaBossAlien();
        //     console.log("Spawned mega boss alien");
        // }

        function updateTutorial() {

        }

        function toggleInvincibility() {
            invincible = !invincible;
            console.log(`Invincibility ${invincible ? 'enabled' : 'disabled'}`);
        }

        function addLives(count) {
            lives += count;
            console.log(`Added ${count} lives. Total lives: ${lives}`);
        }

        function endGame() {
            gameOver = false;
            lives += 1;
        }

        function updateAchievementsAtEnd() {

        }

        function increaseWave() {
            wave++;
            console.log(`Increased wave to ${wave}`);
        }

        function addCoins(amount) {
            coins += amount;
            updateCoinsDisplay();
            console.log(`Added ${amount} coins. Total coins: ${coins}`);
        }
        function spawnFloatingIsland() {
            console.log("spawn");
            lastActivatedWave = wave;
            floatingIsland.active = true;
            floatingIsland.x = -100;

        }
        function toggleFreezeEffect() {
            freezeEffect.active = !freezeEffect.active;
            console.log(`Freeze effect ${freezeEffect.active ? 'enabled' : 'disabled'}`);
        }


        // Start the game when the page loads
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize your game here
            startGame();
        });


    </script>
</body>

</html>